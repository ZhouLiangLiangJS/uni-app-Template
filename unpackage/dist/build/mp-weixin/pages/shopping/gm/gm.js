(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopping/gm/gm"],{"0b11":function(o,n,e){"use strict";(function(o){e("c01b"),e("921b");s(e("66fd"));var n=s(e("8645"));function s(o){return o&&o.__esModule?o:{default:o}}o(n.default)}).call(this,e("543d")["createPage"])},7144:function(o,n,e){"use strict";(function(o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e={data:function(){return{address:[],useUser:this.user,shopping:[],txt:[],jg:null,liuyan:"",url:this.url1,heji:null}},onLoad:function(o){this.shopping=JSON.parse(o.shopping),this.heji=Number(o.heJi),console.log(this.heji),console.log(Number(o.heJi));for(var n=0;n<this.shopping.length;n++)this.shopping[n].liuyan=""},onShow:function(){this.req()},methods:{liji:function(){var n=this;this.address.length>0?function(){var e=n,s=e.url1+"/dinghai/ShopOrder/insertAddress";o.showLoading({mask:!0,title:"正在购买中"});for(var i=function(i){o.request({url:s,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:{shopAddressName:e.address[0].userName,shopAddress:e.address[0].addressOne+e.address[0].addressTwo,shopAdressTel:e.address[0].userTel,shopName:e.shopping[i].commodityname,shopOrderNum:e.shopping[i].shoppingnum,shopPrice:(e.shopping[i].freight+e.shopping[i].shoppingprice)*e.shopping[i].shoppingnum,shopFreight:e.shopping[i].freight,message:e.shopping[i].liuyan,Coupon:0,uid:e.useUser.uid,sid:e.shopping[i].uid,commodityid:e.shopping[i].commodityid,commodityName:e.shopping[i].commodityname},success:function(s){console.log(s),200==s.statusCode?o.request({url:e.url1+"/dinghai/ShopOrder/pay",header:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:{uid:e.useUser.uid,sid:e.shopping[i].sid,money:(e.shopping[i].freight+e.shopping[i].shoppingprice)*e.shopping[i].shoppingnum},success:function(e){if(console.log(e),200==e.statusCode)if(200==e.data.flag){var s=n;o.request({url:s.url1+"/dinghai/Shopping/deleteShopping",header:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:{shoppingid:s.shopping[i].shoppingid},success:function(n){console.log(n),200==n.statusCode?o.showToast({title:"支付成功！",icon:"none"}):o.showToast({title:"支付成功！此件商品在购物车未删除成功，请手动删除",icon:"none"})},fail:function(n){o.showToast({title:"支付成功！此件商品在购物车未删除成功，请手动删除",icon:"none"})}}),o.navigateBack({})}else o.showToast({title:"支付失败！",icon:"none"}),o.showModal({title:"提示",content:"您的余额不足是否要充值",success:function(n){n.confirm?o.navigateTo({url:"../../../mes/jine/chongzhi/chongzhi"}):n.cancel}});else o.showToast({title:"您的网络打了个盹！",icon:"none"})},fail:function(n){o.showToast({title:"您的网络打了个盹！",icon:"none"})}}):o.showToast({title:"您的网络打了个盹！",icon:"none"})},fail:function(n){o.showToast({title:"您的网络打了个盹！",icon:"none"})}})},t=0;t<e.shopping.length;t++)i(t)}():o.showToast({title:"请添加地址后购买",icon:"none"})},tjsh:function(){o.navigateTo({url:"../../mes/dizhi/tjdizhi/tjdizhi"})},back:function(){o.navigateBack({})},dizhiXuanZe:function(){},req:function(){o.showLoading({title:"正在加载",mask:!0});var n=this,e=n.url1+"/dinghai/Address/selectAddress";o.request({url:e,header:{"Content-type":"application/x-www-form-urlencoded"},method:"post",data:{userId:n.useUser.uid},success:function(e){200===e.statusCode?(n.address=e.data.flag,console.log(n.address),o.showToast({title:"加载成功"})):o.showToast({title:"您的网络开了小差",icon:"none"}),console.log(n.address),console.log(n.address.length),n.address.length>=1?n.judgehava=!1:n.judgehava=!0},fail:function(n){console.log(n),o.showToast({title:"连接服务器失败",icon:"none"})}})}}};n.default=e}).call(this,e("543d")["default"])},"75cc":function(o,n,e){"use strict";var s=function(){var o=this,n=o.$createElement;o._self._c},i=[];e.d(n,"a",function(){return s}),e.d(n,"b",function(){return i})},8645:function(o,n,e){"use strict";e.r(n);var s=e("75cc"),i=e("c24a");for(var t in i)"default"!==t&&function(o){e.d(n,o,function(){return i[o]})}(t);e("cd5e");var a=e("2877"),d=Object(a["a"])(i["default"],s["a"],s["b"],!1,null,null,null);n["default"]=d.exports},b3f6:function(o,n,e){},c24a:function(o,n,e){"use strict";e.r(n);var s=e("7144"),i=e.n(s);for(var t in s)"default"!==t&&function(o){e.d(n,o,function(){return s[o]})}(t);n["default"]=i.a},cd5e:function(o,n,e){"use strict";var s=e("b3f6"),i=e.n(s);i.a}},[["0b11","common/runtime","common/vendor"]]]);