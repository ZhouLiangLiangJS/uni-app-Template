(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopping/shopping"],{"0366":function(n,t,o){"use strict";var i=o("a050"),e=o.n(i);e.a},"4a0c":function(n,t,o){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{txt:"编辑",xuanZhong:[],useUser:this.user,gwcArr:[],url:this.url1,zongjia:0,flag:!1,shop:[]}},watch:{gwcArr:function(){this.qx()},xuanZhong:function(){this.zj(),this.qx()}},methods:{jieSuan:function(){if("未登录"==this.user)n.navigateTo({url:"../login/index/index"});else if(this.xuanZhong.length>0){for(var t=[],o=0;o<this.xuanZhong.length;o++)t.push(this.gwcArr[this.xuanZhong[o]]);n.navigateTo({url:"gm/gm?shopping="+JSON.stringify(t)+"&heJi="+this.zongjia})}else n.showToast({title:"请选择商品",icon:"none"})},goShopping:function(t){var o=this,i=o.url1+"/dinghai/shop/byid";n.showLoading({title:"正在获取",mask:!0}),n.request({url:i,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"GET",data:{uid:t.uid},success:function(o){200==o.statusCode?(n.showToast({title:"加载成功"}),console.log(o),n.navigateTo({url:"../index/goShopping/goShopping?goShopping="+JSON.stringify(t)+"&shop="+JSON.stringify(o.data.data),complete:function(n){console.log(n)}})):n.showToast({title:"您的网络打了个盹！",icon:"none"})},fail:function(t){console.log(t),n.showToast({title:"您的网络打了个盹！",icon:"none"})}})},shanChu:function(){if("未登录"==this.user)n.navigateTo({url:"../login/index/index"});else for(var t=0;t<this.xuanZhong.length;t++)this.shanChuReq(this.gwcArr[this.xuanZhong[t]].shoppingid,this.xuanZhong[t],t)},shanChuReq:function(t,o,i){var e=this;n.request({url:e.url1+"/dinghai/Shopping/deleteShopping",header:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:{shoppingid:t},success:function(t){console.log(t),200==t.statusCode?(e.gwcArr.splice(o,1),e.xuanZhong.splice(i,1)):n.showToast({title:"您的网络打了个盹",icon:"none"})},fail:function(t){n.showToast({title:"您的网络打了个盹",icon:"none"})}})},qx:function(){0!=this.gwcArr.length&&this.gwcArr.length==this.xuanZhong.length?this.flag=!0:this.flag=!1},zj:function(){for(var n=0,t=0;t<this.xuanZhong.length;t++)n+=(this.gwcArr[this.xuanZhong[t]].shoppingprice+this.gwcArr[this.xuanZhong[t]].freight)*this.gwcArr[this.xuanZhong[t]].shoppingnum;this.zongjia=n},quanXuan:function(){if(this.xuanZhong.length!=this.gwcArr.length){for(var n=[],t=0;t<this.gwcArr.length;t++)n.push(t);this.xuanZhong=n}else this.xuanZhong=[]},dian:function(n){-1==this.xuanZhong.indexOf(n)?this.xuanZhong.push(n):this.xuanZhong.splice(this.xuanZhong.indexOf(n),1)},del:function(n){!(n.shoppingnum<=1)&&n.shoppingnum--,this.zj()},add:function(n){n.shoppingnum++,this.zj()},get:function(){console.log(this.useUser.uid);var t=this,o=t.url1+"/dinghai/Shopping/selectAllShopping";n.request({url:o,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:{uid:t.useUser.uid},success:function(o){console.log(o),200==o.statusCode?t.gwcArr=o.data.flag:n.showToast({title:"您的网络打了个盹",icon:"none"})},fail:function(t){n.showToast({title:"您的网络打了个盹",icon:"none"})}})},getArr:function(){var t=this,o=t.url1+"/dinghai/commodity/getbytypeall";n.showLoading({title:"正在加载",mask:!0}),n.request({url:o,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"GET",data:{type:"家纺",start:1,size:20},success:function(o){if(console.log(o),200==o.data.code){t.shop=o.data.data;for(var i=0;i<t.shop.length;i++)t.shop[i].img1=JSON.parse(t.shop[i].img1),t.shop[i].img2=JSON.parse(t.shop[i].img2);n.showToast({title:"加载成功",icon:"none"})}else n.showToast({title:"您的网络打了个盹",icon:"none"})},fail:function(t){console.log(t),n.showToast({title:"您的网络打了个盹",icon:"none"})}})}},onLoad:function(){"未登录"==this.user?n.navigateTo({url:"../login/index/index"}):(this.get(),this.getArr(),this.xuanZhong=[])},onShow:function(){this.get(),this.getArr(),this.xuanZhong=[]}};t.default=o}).call(this,o("543d")["default"])},"4dc6":function(n,t,o){"use strict";(function(n){o("c01b"),o("921b");i(o("66fd"));var t=i(o("e3e0"));function i(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,o("543d")["createPage"])},"511c":function(n,t,o){"use strict";o.r(t);var i=o("4a0c"),e=o.n(i);for(var s in i)"default"!==s&&function(n){o.d(t,n,function(){return i[n]})}(s);t["default"]=e.a},a050:function(n,t,o){},b14b:function(n,t,o){"use strict";var i=function(){var n=this,t=n.$createElement,o=(n._self._c,n.__map(n.gwcArr,function(t,o){var i=n.xuanZhong.indexOf(o);return{$orig:n.__get_orig(t),g0:i}}));n._isMounted||(n.e0=function(t){"编辑"==n.txt?n.txt="返回":n.txt="编辑"}),n.$mp.data=Object.assign({},{$root:{l0:o}})},e=[];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return e})},e3e0:function(n,t,o){"use strict";o.r(t);var i=o("b14b"),e=o("511c");for(var s in e)"default"!==s&&function(n){o.d(t,n,function(){return e[n]})}(s);o("0366");var a=o("2877"),h=Object(a["a"])(e["default"],i["a"],i["b"],!1,null,null,null);t["default"]=h.exports}},[["4dc6","common/runtime","common/vendor"]]]);